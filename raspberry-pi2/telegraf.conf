# Telegraf Configuration for Raspberry Pi 2
# Docker metrics collection only (no MQTT)

[global_tags]
  source = "raspberry-pi2"
  host = "192.168.0.147"

[agent]
  interval = "10s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "10s"
  flush_jitter = "0s"
  precision = ""
  debug = false
  quiet = false
  logfile = ""
  hostname = "raspberrypi2"
  omit_hostname = false

# ==============================================================================
# INPUT PLUGINS - Docker Container Metrics
# ==============================================================================

[[inputs.docker]]
  endpoint = "unix:///var/run/docker.sock"
  gather_services = false
  source_tag = false
  container_name_include = []
  container_name_exclude = []
  timeout = "5s"
  docker_label_include = ["com.docker.compose.service", "com.docker.compose.project"]
  tag_env = []

# ==============================================================================
# OUTPUT PLUGINS - Prometheus Metrics Endpoint
# ==============================================================================

[[outputs.prometheus_client]]
  # Expose Telegraf metrics on /metrics endpoint
  listen = ":9273"
  path = "/metrics"
  
  # Include basic Telegraf internal metrics
  collectors_exclude = ["gocollector", "process"]
